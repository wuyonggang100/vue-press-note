(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{400:function(s,n,e){"use strict";e.r(n);var a=e(54),t=Object(a.a)({},(function(){var s=this,n=s.$createElement,e=s._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h4",{attrs:{id:"babel-在实际项目中的应用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#babel-在实际项目中的应用"}},[s._v("#")]),s._v(" babel 在实际项目中的应用")]),s._v(" "),e("h5",{attrs:{id:"env-配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#env-配置"}},[s._v("#")]),s._v(" env 配置")]),s._v(" "),e("blockquote",[e("p",[s._v("根据不同的环境可以作不同的配置，使用 env 来判断 "),e("code",[s._v("NODE_ENV")]),s._v("、"),e("code",[s._v("BABEL_ENV")]),s._v("），做不同配置,例如  development 和 production 时作不同的配置。")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('{\n  "env": {\n    "development": {\n      "presets": [\n        [\n          "env",\n        ]\n      ]\n    },\n    "production": {\n      ...\n    }\n  }\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br")])]),e("h4",{attrs:{id:"react-中"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#react-中"}},[s._v("#")]),s._v(" react 中")]),s._v(" "),e("blockquote",[e("p",[e("code",[s._v("babel-preset-react")]),s._v(" 已经包含了一组 plugins")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("preset-flow")]),s._v(": 编译 flow")]),s._v(" "),e("li",[e("code",[s._v("syntax-jsx")]),s._v(": 识别 jsx 语法")]),s._v(" "),e("li",[e("code",[s._v("transform-react-jsx")]),s._v(": 编译 jsx")]),s._v(" "),e("li",[e("code",[s._v("transform-react-display-name")]),s._v(": 自动添加组件的 displayName")])]),s._v(" "),e("p",[s._v("但上面这些只是满足基础编译而已，可以添加下面这个 preset 提高 React 应用的性能")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("npm i babel-preset-react-optimize\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("项目主页有详细的说明，简要概括下")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("transform-react-constant-elements")]),s._v("\n识别并转换可以转成常量的组件")]),s._v(" "),e("li",[e("code",[s._v("transform-react-remove-prop-types")]),s._v("\n删除 propTypes")]),s._v(" "),e("li",[e("code",[s._v("transform-react-pure-class-to-function")]),s._v("\n尽可能把 class 组件转为 functional 组件")])])]),s._v(" "),e("h4",{attrs:{id:"vue中"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vue中"}},[s._v("#")]),s._v(" vue中")]),s._v(" "),e("blockquote",[e("p",[s._v("babel 的版本冲突，babel-loader 8.x对应babel 7.x以此类推。")])]),s._v(" "),e("ul",[e("li",[e("h5",{attrs:{id:"vue-babel-preset-app"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vue-babel-preset-app"}},[s._v("#")]),s._v(" @vue/babel-preset-app")]),s._v(" "),e("blockquote",[e("p",[s._v("此预设只在 vue cli 创建的项目中使用，不适合在其他场景下使用。")])])]),s._v(" "),e("li",[e("h5",{attrs:{id:"syntax-dynamic-import"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#syntax-dynamic-import"}},[s._v("#")]),s._v(" syntax-dynamic-import")])]),s._v(" "),e("li",[e("h5",{attrs:{id:"babel-plugin-component-按需引入"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#babel-plugin-component-按需引入"}},[s._v("#")]),s._v(" babel-plugin-component  按需引入")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('{\n    "presets": ["@babel/preset-env"],\n    "plugins": ["@babel/plugin-transform-runtime","@babel/plugin-proposal-class-properties",["component", {\n          "libraryName": "mint-ui",\n          "style": true\n        }\n      ]]\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])])]),s._v(" "),e("li",[e("h4",{attrs:{id:"babel-plugin-transform-vue-jsx-只在-babel-6-中使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#babel-plugin-transform-vue-jsx-只在-babel-6-中使用"}},[s._v("#")]),s._v(" babel-plugin-transform-vue-jsx ， 只在 babel 6 中使用")]),s._v(" "),e("blockquote",[e("p",[s._v("安装：以下在 babel 6 中")]),s._v(" "),e("p",[s._v("npm install"),e("br"),s._v("\nbabel-plugin-syntax-jsx"),e("br"),s._v("\nbabel-plugin-transform-vue-jsx"),e("br"),s._v("\nbabel-helper-vue-jsx-merge-props"),e("br"),s._v("\nbabel-preset-env"),e("br"),s._v("\n--save-dev")]),s._v(" "),e("p",[s._v(".babelrc 中： 在 babel 6 中")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('{\n  "presets": ["env"],\n  "plugins": ["transform-vue-jsx"]\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])])])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("render (h) {\n  return h('div', {\n    // Component props\n    props: {\n      msg: 'hi',\n      onCustomEvent: this.customEventHandler\n    },\n    // normal HTML attributes\n    attrs: {\n      id: 'foo'\n    },\n    // DOM props\n    domProps: {\n      innerHTML: 'bar'\n    },\n    // Event handlers are nested under \"on\", though\n    // modifiers such as in v-on:keyup.enter are not\n    // supported. You'll have to manually check the\n    // keyCode in the handler instead.\n    on: {\n      click: this.clickHandler\n    },\n    // For components only. Allows you to listen to\n    // native events, rather than events emitted from\n    // the component using vm.$emit.\n    nativeOn: {\n      click: this.nativeClickHandler\n    },\n    // class is a special module, same API as `v-bind:class`\n    class: {\n      foo: true,\n      bar: false\n    },\n    // style is also same as `v-bind:style`\n    style: {\n      color: 'red',\n      fontSize: '14px'\n    },\n    // other special top-level properties\n    key: 'key',\n    ref: 'ref',\n    // assign the `ref` is used on elements/components with v-for\n    refInFor: true,\n    slot: 'slot'\n  })\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br"),e("span",{staticClass:"line-number"},[s._v("38")]),e("br"),e("span",{staticClass:"line-number"},[s._v("39")]),e("br"),e("span",{staticClass:"line-number"},[s._v("40")]),e("br"),e("span",{staticClass:"line-number"},[s._v("41")]),e("br"),e("span",{staticClass:"line-number"},[s._v("42")]),e("br"),e("span",{staticClass:"line-number"},[s._v("43")]),e("br"),e("span",{staticClass:"line-number"},[s._v("44")]),e("br"),e("span",{staticClass:"line-number"},[s._v("45")]),e("br"),e("span",{staticClass:"line-number"},[s._v("46")]),e("br")])]),e("p",[s._v("与上面等效的方式如下：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('render (h) {\n  return (\n    <div\n      // normal attributes or prefix with on props.\n      id="foo"\n      propsOnCustomEvent={this.customEventHandler}\n      // DOM properties are prefixed with `domProps`\n      domPropsInnerHTML="bar"\n      // event listeners are prefixed with `on` or `nativeOn`\n      onClick={this.clickHandler}\n      nativeOnClick={this.nativeClickHandler}\n      // other special top-level properties\n      class={{ foo: true, bar: false }}\n      style={{ color: \'red\', fontSize: \'14px\' }}\n      key="key"\n      ref="ref"\n      // assign the `ref` is used on elements/components with v-for\n      refInFor\n      slot="slot">\n    </div>\n  )\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br")])]),e("h5",{attrs:{id:"babel-7-中使用-vue-babel-preset-jsx来支持-jsx-语法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#babel-7-中使用-vue-babel-preset-jsx来支持-jsx-语法"}},[s._v("#")]),s._v(" babel 7 中使用  @vue/babel-preset-jsx来支持 jsx 语法")]),s._v(" "),e("blockquote",[e("p",[s._v("其内部使用了以下两个插件 ：")]),s._v(" "),e("p",[s._v("@vue/babel-preset-jsx  和 @vue/babel-helper-vue-jsx-merge-props")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("安装： yarn add @vue/babel-preset-jsx @vue/babel-helper-vue-jsx-merge-props  或 npm install @vue/babel-preset-jsx @vue/babel-helper-vue-jsx-merge-props --save")])]),s._v(" "),e("li",[e("p",[s._v("在 .babelrc 中")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('{\n  "presets": [\n    [\n      "@vue/babel-preset-jsx",\n      {\n        "vModel": false\n      }\n    ]\n  ]\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])])])])]),s._v(" "),e("ul",[e("li",[e("p",[s._v("@ babel / plugin-syntax-dynamic-import插件 ，允许使用 import() 语法")]),s._v(" "),e("blockquote",[e("p",[s._v("npm install --save-dev @babel/plugin-syntax-dynamic-import 或 npm install --save-dev @babel/plugin-syntax-dynamic-import")])])]),s._v(" "),e("li",[e("p",[s._v("同时使用 vant 和 we-vue 两个UI 库，并需要按需加载时:")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('module.exports = {\n  presets: [\n    \'@vue/app\'\n  ],\n  plugins:[\n      [\n          "import",\n          {\n              "libraryName": "vant",\n              "libraryDirectory": "es",\n              "style": true\n            }\n      ],\n      [\n          "import",\n          {\n              "libraryName": "we-vue",\n              "style": "style.css"  // 按需加载的情况下也得引入 lib/style.css。\n            },\n            "we-vue"\n      ]\n  ]\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br")])])])])])}),[],!1,null,null,null);n.default=t.exports}}]);