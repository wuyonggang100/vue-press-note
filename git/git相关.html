<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>将本地已有的仓库关联到远程的空仓库 | gang&#39;s blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/vue-press-notelogo.jpg">
    <meta name="description" content="我的个人网站">
    
    <link rel="preload" href="/vue-press-note/assets/css/0.styles.7dd0787c.css" as="style"><link rel="preload" href="/vue-press-note/assets/js/app.4bd73707.js" as="script"><link rel="preload" href="/vue-press-note/assets/js/2.4328fceb.js" as="script"><link rel="preload" href="/vue-press-note/assets/js/28.17216642.js" as="script"><link rel="prefetch" href="/vue-press-note/assets/js/10.a49e9ac0.js"><link rel="prefetch" href="/vue-press-note/assets/js/11.737a2acd.js"><link rel="prefetch" href="/vue-press-note/assets/js/12.1623d84f.js"><link rel="prefetch" href="/vue-press-note/assets/js/13.c3ae7b39.js"><link rel="prefetch" href="/vue-press-note/assets/js/14.697be0e4.js"><link rel="prefetch" href="/vue-press-note/assets/js/15.b423fa58.js"><link rel="prefetch" href="/vue-press-note/assets/js/16.784768a9.js"><link rel="prefetch" href="/vue-press-note/assets/js/17.1713f54d.js"><link rel="prefetch" href="/vue-press-note/assets/js/18.d49ce26d.js"><link rel="prefetch" href="/vue-press-note/assets/js/19.594596e0.js"><link rel="prefetch" href="/vue-press-note/assets/js/20.ae02f01d.js"><link rel="prefetch" href="/vue-press-note/assets/js/21.83543091.js"><link rel="prefetch" href="/vue-press-note/assets/js/22.ff50eac7.js"><link rel="prefetch" href="/vue-press-note/assets/js/23.b24e81e0.js"><link rel="prefetch" href="/vue-press-note/assets/js/24.14b8279a.js"><link rel="prefetch" href="/vue-press-note/assets/js/25.c49e98e3.js"><link rel="prefetch" href="/vue-press-note/assets/js/26.4f0b3843.js"><link rel="prefetch" href="/vue-press-note/assets/js/27.5ca41cd1.js"><link rel="prefetch" href="/vue-press-note/assets/js/29.7a282f33.js"><link rel="prefetch" href="/vue-press-note/assets/js/3.e48146a6.js"><link rel="prefetch" href="/vue-press-note/assets/js/30.850a2308.js"><link rel="prefetch" href="/vue-press-note/assets/js/31.0dad49ed.js"><link rel="prefetch" href="/vue-press-note/assets/js/32.607e15a2.js"><link rel="prefetch" href="/vue-press-note/assets/js/33.0a57ef8a.js"><link rel="prefetch" href="/vue-press-note/assets/js/34.44d68ba3.js"><link rel="prefetch" href="/vue-press-note/assets/js/35.76cec9ca.js"><link rel="prefetch" href="/vue-press-note/assets/js/36.490c4788.js"><link rel="prefetch" href="/vue-press-note/assets/js/4.55eb244d.js"><link rel="prefetch" href="/vue-press-note/assets/js/5.7d12f753.js"><link rel="prefetch" href="/vue-press-note/assets/js/6.44237979.js"><link rel="prefetch" href="/vue-press-note/assets/js/7.4927ac18.js"><link rel="prefetch" href="/vue-press-note/assets/js/8.d9acc34e.js"><link rel="prefetch" href="/vue-press-note/assets/js/9.4603156d.js">
    <link rel="stylesheet" href="/vue-press-note/assets/css/0.styles.7dd0787c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vue-press-note/" class="home-link router-link-active"><!----> <span class="site-name">gang's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vue-press-note/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/vue-press-note/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="温故" class="dropdown-title"><span class="title">温故</span> <span class="arrow down"></span></button> <button type="button" aria-label="温故" class="mobile-dropdown-title"><span class="title">温故</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue-press-note/node/" class="nav-link">
  前端
</a></li><li class="dropdown-item"><!----> <a href="/vue-press-note/algorithm/" class="nav-link">
  算法题库
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vue-press-note/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/vue-press-note/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="温故" class="dropdown-title"><span class="title">温故</span> <span class="arrow down"></span></button> <button type="button" aria-label="温故" class="mobile-dropdown-title"><span class="title">温故</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue-press-note/node/" class="nav-link">
  前端
</a></li><li class="dropdown-item"><!----> <a href="/vue-press-note/algorithm/" class="nav-link">
  算法题库
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>浏览器相关</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vue-press-note/browser/浏览器API/01.url到 UI 渲染过程.html" class="sidebar-link">url到 UI 渲染过程</a></li><li><a href="/vue-press-note/browser/浏览器API/设备振动，屏幕强度，横竖屏，电池.html" class="sidebar-link">浏览器API</a></li><li><a href="/vue-press-note/browser/浏览器API/DOM 性能API.html" class="sidebar-link">性能查看与监控</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>node</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>babel 系列</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>webpack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>记不住的 js</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>git 系列</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="将本地已有的仓库关联到远程的空仓库"><a href="#将本地已有的仓库关联到远程的空仓库" class="header-anchor">#</a> 将本地已有的仓库关联到远程的空仓库</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># 关联</span>
<span class="token function">git</span> remote <span class="token function">add</span> origin 远程仓库地址  <span class="token comment"># origin 是此次自定义的远程仓库的名称，可以是 xxx</span>
<span class="token comment"># 推送，第一次推送带上 -u 会推送并关联</span>
<span class="token function">git</span> push -u origin master  <span class="token comment"># 把本地 master 分支推送到远程 origin 分支</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="当远程某些分支已经删除-而本地还保留时"><a href="#当远程某些分支已经删除-而本地还保留时" class="header-anchor">#</a> 当远程某些分支已经删除，而本地还保留时</h4> <ul><li><p>列出本地所有分支以及它们的追踪状态，可以显示远程的哪些分支已经被删除。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>git remote show origin   
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>删除本地较远程残留的多余的分支，与远程保持一致</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>git remote prune origin  // 删除残留分支
git branch -D xxx   // 删除本地现有比远程多的分支 xxx
git branch -a  // 查看本地现有分支
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul> <h4 id="先本地删除某分支-然后对远程删除同一分支"><a href="#先本地删除某分支-然后对远程删除同一分支" class="header-anchor">#</a> 先本地删除某分支，然后对远程删除同一分支</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>git branch -d xxx  // 删除本地 xxx 分支
git push origin -d xxx // 删除远程 xxx 分支
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h5 id="撤销commit-回到add-后的状态"><a href="#撤销commit-回到add-后的状态" class="header-anchor">#</a> 撤销commit ，回到add 后的状态</h5> <blockquote><p>只是撤回到 commit 前的状态，代码不会丢失。</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>git reset --soft HEAD^  
// HEAD^的意思是上一个版本，也可以写成HEAD~1
// 如果进行了2次commit，想把这两次都撤回，可以使用HEAD~2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p>--mixed
意思是：代码不丢失，回到add 前状态；
这个为默认参数,git reset --mixed HEAD^ 和 git reset HEAD^ 效果是一样的。</p> <p>--soft
代码不丢失，回到 add 后状态</p> <p>--hard
代码丢失，回到上一次commit 后的状态</p></blockquote> <h3 id="本地分支封版"><a href="#本地分支封版" class="header-anchor">#</a> 本地分支封版</h3> <blockquote><p>需要从此分支上新建一个分支用来开发，并推送到远程</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>// 从本地当前分支xxx上新建并切换到该分支进行开发：
git checout -b newBranch 
// 将新建分支推送到远程：
git push origin newBranch
// 删除本地原来开发的分支(不能删除远程分支xxx)
git branch -D xxx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="设置git-缓存值大小"><a href="#设置git-缓存值大小" class="header-anchor">#</a> 设置git 缓存值大小</h4> <blockquote><p>有时 git  clone  因为代码量过大最后会 clone 失败，此时需要加大git 缓存空间大小。默认为 65520</p> <p>如下表示设置为5G</p></blockquote> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">git</span> config --global http.postBuffer <span class="token number">5242880000</span>

<span class="token function">git</span> config --global https.postBuffer <span class="token number">5242880000</span>

<span class="token function">git</span> config --list 查看设置值
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="git报错-another-git-process-seems-to-be-running-in-thisrepository"><a href="#git报错-another-git-process-seems-to-be-running-in-thisrepository" class="header-anchor">#</a> Git报错：Another git process seems to be running in thisrepository</h3> <blockquote><p>翻译：另一个git进程似乎正在这个存储库中运行，例如 由“git commit”打开的编辑器。请确保所有流程终止，然后重试。如果它仍然失败，一个git进程可能已在此存储库中崩溃：手动删除文件以继续。</p></blockquote> <p>解决方法有两种：</p> <ol><li>找到.git/index.lock文件，直接删除即可；
如果在linux上的话，执行rm删除命令：</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>rm <span class="token operator">-</span>f <span class="token punctuation">.</span>git<span class="token operator">/</span>index<span class="token punctuation">.</span>lock
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="2"><li>执行 git 命令</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>git clean <span class="token operator">-</span>f <span class="token punctuation">.</span>git<span class="token operator">/</span>index<span class="token punctuation">.</span>lock
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="git-rebase"><a href="#git-rebase" class="header-anchor">#</a> git rebase</h2> <ul><li><p>代码合并有两种方式：合并 (merge) 和衍合 (rebase) , 衍变又称变基。 变基可以让代码的提交历史更简洁清晰，不杂乱。实际的开发工作是并行的，但它们看上去就像是串行的一样，提交历史是一条直线没有分叉。</p></li> <li><p>合并的核心在于差异比较，将有差异的部分合到一起；对于两个不同分支的合并，git 官方解释是：它是把两个分支的最新快照以及二者最近的共同祖先进行三方合并，合并的结果是生成一个新的快照（并提交）。</p></li> <li><p>衍合/变基：思路在于将多次提交都变化为在一条分支上依次进行，最后只得到一条变化线。</p></li> <li><p>例子：想要把某分支 experiment 改动的代码合到 master 分支上， 而这两个分支目前都有各自的改动；</p> <p>图1</p> <p><img src="C:%5CUsers%5Cadmin%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210628094538249.png" alt="image-20210628094538249"></p> <p>图2</p> <p><img src="C:%5CUsers%5Cadmin%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210628094609483.png" alt="image-20210628094609483"></p> <p>图3</p> <p><img src="C:%5CUsers%5Cadmin%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210628094628510.png" alt="image-20210628094628510"></p></li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token number">1</span>. 将 experiment 变基到 master
<span class="token function">git</span> checkout experiment
<span class="token function">git</span> rebase master
<span class="token number">2</span>. 回到 master， 将其他分支的代码进行快进合并
<span class="token function">git</span> checkout master
<span class="token function">git</span> merge experiment 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li><p>原理</p> <blockquote><p>首先找到这两个分支（即当前分支 experiment、衍合操作的目标分支 master）的最近共同祖先 C2，然后对比当前分支相对于该祖先的历次提交，提取相应的修改并存为临时文件，然后将当前分支指向目标基底 C3, 最后以此将之前另存为临时文件的修改依序应用。注意，也就是说这个过程中，如图experiment会先抛弃之前的C4提交，然后把C4变动的代码作为新的C4’重新再提交一次。</p></blockquote></li> <li><p>避免雷区</p> <blockquote><p>在上面的衍合过程中，给 master 起个名字叫被动分支，experiment 叫主动分支。</p> <p><strong>注意： 不要将公共分支作为“主动分支”使用衍合，最好是将自己单独的分支作为主动分支。</strong></p></blockquote></li> <li><p>使用场景：</p> <ol><li><p>当别人也有提交，自己 push 的时候会将别人的已经 push 的代码merge 后再来 push 一次，此时提交历史就会杂乱重复，需要用到 rebase 。解决方式如下</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>拉取代码的时候需要
<span class="token function">git</span> pull --rebase
<span class="token function">git</span> pull --rebase origin dev    <span class="token comment"># 从dev分支进行 rebase 拉取</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>在 sourcetree 中， 勾选衍合，英文是 rebase 。</p> <p><img src="C:%5CUsers%5Cadmin%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210628101206018.png" alt="image-20210628101206018"></p></li> <li><p>让提交历史清晰简洁。解决方式如上所述。</p></li></ol></li> <li><p>设置自动进行衍合。等同于上面的勾选衍合。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">git</span> config --global pull.rebase <span class="token string">&quot;true&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <h2 id="git-flow"><a href="#git-flow" class="header-anchor">#</a> git flow</h2> <h2 id="主分支上修改的内容同步到子分支-非-merge"><a href="#主分支上修改的内容同步到子分支-非-merge" class="header-anchor">#</a> 主分支上修改的内容同步到子分支，非 merge</h2></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/vue-press-note/assets/js/app.4bd73707.js" defer></script><script src="/vue-press-note/assets/js/2.4328fceb.js" defer></script><script src="/vue-press-note/assets/js/28.17216642.js" defer></script>
  </body>
</html>
